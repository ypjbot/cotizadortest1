<!DOCTYPE html>
<html>
<head>
    <title>Cotizador de Bordados V5 </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Cotizador de Bordados V5.1 </h1>
    <form id="formulario" enctype="multipart/form-data">
        <label for="imagen">Subir imagen del logo:</label>
        <input type="file" id="imagen" name="imagen" required><br><br>
        <button type="submit">Cotizar</button>
    </form>
    <div id="resultado"></div>

    <script>
        document.getElementById("formulario").addEventListener("submit", async function(event) {
            event.preventDefault();

            // Obtener el archivo de imagen
            const imagen = document.getElementById("imagen").files[0];
            const formData = new FormData();
            formData.append("imagen", imagen);

            try {
                // Realizar la solicitud a la API
                const respuesta = await fetch("http://ypjbot/pythonanywhere.com/procesar-imagen", {
                    method: "POST",
                    body: formData
                });
                const datos = await respuesta.json();

                // Mostrar el resultado en la página
                document.getElementById("resultado").innerHTML = `
                    <h2>Resultado:</h2>
                    <p><strong>Mensaje:</strong> ${datos.mensaje}</p>
                    <p><strong>Etiquetas:</strong> ${datos.etiquetas.join(", ")}</p>
                    <p><strong>Puntuación de Complejidad:</strong> ${datos.puntuacion_complejidad}</p>
                    <p><strong>Precio:</strong> ${datos.precio}</p>
                `;
            } catch (error) {
                document.getElementById("resultado").innerHTML = `<p>Error: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>
